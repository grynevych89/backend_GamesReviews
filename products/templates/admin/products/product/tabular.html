{% load i18n admin_urls static admin_modify %}

<table id="{{ inline_admin_formset.formset.prefix }}-group" class="tabular inline-related">
    <caption>{{ inline_admin_formset.opts.verbose_name_plural|capfirst }}</caption>

    {# –û–±—â–∏–π management_form –¥–ª—è Django #}
    {{ inline_admin_formset.formset.management_form }}

    <thead>
        <tr>
            <th>–í–æ–ø—Ä–æ—Å</th>
            <th>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–∞</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–æ—Ä–º—ã #}
        {% for inline_admin_form in inline_admin_formset %}
        <tr class="form-row dynamic-{{ inline_admin_formset.formset.prefix }}"
            data-form-index="{{ forloop.counter0 }}"
            {% if inline_admin_form.original %}data-poll-id="{{ inline_admin_form.original.id }}"{% endif %}>

            {# –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –∫–∞–∂–¥–æ–π —Ñ–æ—Ä–º—ã (id, DELETE, ORDER –∏ —Ç.–¥.) #}
            {% for hidden in inline_admin_form.form.hidden_fields %}
                {{ hidden }}
            {% endfor %}

            <td class="field-question">
                {{ inline_admin_form.form.question }}
            </td>

            <td class="poll-options">
                <div class="poll-answers-container">
                    {% if inline_admin_form.original %}
                        {% for option in inline_admin_form.original.options.all %}
                        <div class="poll-answer-row">
                            <input type="text"
                                   class="vTextField"
                                   name="poll-{{ inline_admin_form.original.pk }}-answer-{{ forloop.counter0 }}"
                                   value="{{ option.text }}"
                                   placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞" />
                            <button type="button" class="delete-answer-btn">‚úñ</button>
                        </div>
                        {% endfor %}
                    {% endif %}
                </div>
                <button type="button" class="button add-option-btn">–î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞</button>
            </td>

            <td class="poll-actions">
                <button type="button" class="button poll-save-button"
                        {% if inline_admin_form.original %}data-poll-id="{{ inline_admin_form.original.id }}"{% endif %}>
                    üíæ
                </button>
                <button type="button" class="button poll-delete-button"
                        {% if inline_admin_form.original %}data-poll-id="{{ inline_admin_form.original.id }}"{% endif %}>
                    üóëÔ∏è
                </button>
            </td>
        </tr>
        {% endfor %}

        {# –ü—É—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è #}
        <tr id="{{ inline_admin_formset.formset.prefix }}-empty"
            class="form-row empty-form dynamic-{{ inline_admin_formset.formset.prefix }}"
            style="display:none;">

            {# –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –ø—É—Å—Ç–æ–π —Ñ–æ—Ä–º—ã #}
            {% for hidden in inline_admin_formset.formset.empty_form.hidden_fields %}
                {{ hidden }}
            {% endfor %}

            <td class="field-question">
                <input type="text"
                       name="{{ inline_admin_formset.formset.prefix }}-__prefix__-question"
                       class="vTextField"
                       placeholder="–í–æ–ø—Ä–æ—Å" />
            </td>

            <td class="poll-options">
                <div class="poll-answers-container">
                    <div class="poll-answer-row">
                        <input type="text"
                               name="{{ inline_admin_formset.formset.prefix }}-__prefix__-answer-0"
                               class="vTextField"
                               placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞" />
                        <button type="button" class="delete-answer-btn">‚úñ</button>
                    </div>
                </div>
                <button type="button" class="button add-option-btn">–î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞</button>
            </td>

            <td class="poll-actions">
                <button type="button" class="button poll-save-button">üíæ</button>
                <button type="button" class="button poll-delete-button">üóëÔ∏è</button>
            </td>
        </tr>
    </tbody>
</table>

<div class="add-row">
    <button type="button"
            class="button add-row"
            id="add_{{ inline_admin_formset.formset.prefix }}">
        –î–æ–±–∞–≤–∏—Ç—å {{ inline_admin_formset.opts.verbose_name }}
    </button>
</div>
